<html>
    <body>
        <canvas style="border:solid black 4px;" width="800px" height="500px" id="canvas-container"></canvas>
    </body>        
    <script>
        const canvas = document.getElementById("canvas-container");
        let ctx = canvas.getContext('2d');
        //Question 1:
        const greenBrick= {
            x:null,
            y:null,
            backgroundColor : "#5C9A33",
            borderColor : "#000000",
            width: 50,
            height:20,
            draw: (widthDraw,heightDraw) =>{
                ctx.fillStyle=greenBrick.backgroundColor;
                ctx.strokeStyle=greenBrick.borderColor;
                ctx.fillRect(widthDraw,heightDraw,greenBrick.width,greenBrick.height);
                ctx.strokeRect(widthDraw,heightDraw,greenBrick.width,greenBrick.height);
            }
        }
        const yellowBrick= {
            x:null,
            y:null,
            backgroundColor : "#F9A620",
            borderColor : "#42CAFD",
            width: 50,
            height:50,
            draw: (widthDraw,heightDraw) =>{
                ctx.fillStyle=yellowBrick.backgroundColor;
                ctx.strokeStyle=yellowBrick.borderColor;
                ctx.fillRect(widthDraw,heightDraw,yellowBrick.width,yellowBrick.height);
                ctx.strokeRect(widthDraw,heightDraw,yellowBrick.width,yellowBrick.height);
            }
        } 
        const redBrick={
            x:null,
            y:null,
            backgroundColor : "#690500",
            borderColor : "#B0228C",
            width: 20,
            height:50,
            draw:(widthDraw,heightDraw)=>{
                ctx.fillStyle=redBrick.backgroundColor;
                ctx.strokeStyle=redBrick.borderColor;
                ctx.fillRect(widthDraw,heightDraw,redBrick.width,redBrick.height);
                ctx.strokeRect(widthDraw,heightDraw,redBrick.width,redBrick.height);
            }
        }
        const bird={
            x:100,
            y:200,
            speed:10,
            color:"#FE5F55",
            name: "red throat",
            score: 0,
            src:"assets/bird0.PNG",
            srcNumber:0,
            draw:()=>{
                drawing = new Image()
                drawing.src = bird.src;
                drawing.onload = function(){
                    ctx.drawImage(drawing,bird.x,bird.y,50,50);
                }
            },
        }
        //display bird
        bird.draw()

        //add event listener for the pad
        document.addEventListener("keyup",(e)=>{
                    if(e.key==="ArrowLeft"){
                        ctx.clearRect(bird.x,bird.y,50,50);
                        bird.x = bird.x - bird.speed*2;
                        bird.srcNumber = (bird.srcNumber+1)%14
                        bird.src = "assets/bird"+bird.srcNumber+".PNG"
                        bird.draw();
                    }else if (e.key==="ArrowRight"){
                        ctx.clearRect(bird.x,bird.y,50,50);
                        bird.x = bird.x + bird.speed *2;
                        bird.srcNumber = (bird.srcNumber+1)%14
                        bird.src = "assets/bird"+bird.srcNumber+".PNG"
                        bird.draw();
                    }
                    
                })
        var bricks = []
        //display green brick
        //greenBrick.draw(100,50)
        //display yellow brick
        //yellowBrick.draw()
        //display red brick
        //redBrick.draw()
        
        createWall(50,200,greenBrick,200,0)
        createWall(50,100,greenBrick,50,300)
        createWall(100,100,yellowBrick,225,275)
        createWall(120,50,redBrick,350,50)
        createWall(120,50,redBrick,380,150)
        createWall(50,250,greenBrick,600,200)

        
        function createWall(witdhWall,heightWall,brick,posWidth,posHeight){
            widthOffset = posWidth;
            heightOffset = posHeight;
            //widthCursor = widthOffset;
            //heightCursor = heightOffset;
            witdhWall = witdhWall;
            heightWall = heightWall;
            brickColumns = Math.trunc(witdhWall/brick.width)
            brickLines= Math.trunc(heightWall/brick.height)
            //console.log(brickColumns)
            //console.log(brickLines)
            for(i=0;i<brickLines;i++){
                for(j=0;j<brickColumns;j++){
                    //console.log("line "+i+" ; column "+j);
                    brick.draw(widthOffset+j*brick.width,heightOffset+i*brick.height)
                    brick.x = widthOffset+j*brick.width;
                    brick.y = heightOffset+i*brick.height;
                    bricks.push(brick);
                }
            }
        }
        //check if the bird crash
        console.log(bricks);
        var colision = false;
        bricks.forEach(brick=>{
            var leftUp = {x:bird.x,y:bird.y}
            var rightUp = {x:bird.x+50,y:bird.y}
            var leftDown = {x:bird.x,y:bird.y+50}
            var rightDown = {x:bird.x+50,y:bird.y+50}
            if((rightUp.x >= brick.x)&&(rightUp.x <= brick.x+brick.width)&&(rightUp.y >= brick.y)&&(rightUp.y <= brick.y+brick.height)){
                colision = true;
            }
        });
        console.log(colision);
        if(colision){
            alert("There is  colision !!");
        }
    </script>
    </body>
</html>